<%= link_to "← Back to #{@vehicle.manufacturer.name} Vehicles", manufacturer_vehicles_path(@vehicle.manufacturer), role: "button", class: "secondary outline" %>

<article>
  <header>
    <h1><%= @vehicle.year %> <%= @vehicle.manufacturer.name %> <%= @vehicle.name %></h1>
    <p><small>Vehicle ID: <%= @vehicle.id %></small></p>
  </header>

  <div class="grid">
    <!-- Main Details Card -->
    <section>
      <hgroup>
        <h2>Vehicle Details</h2>
      </hgroup>
      <div class="grid">
        <div>
          <small>Manufacturer</small>
          <p><strong><%= @vehicle.manufacturer.name %></strong></p>
        </div>

        <div>
          <small>Model Name</small>
          <p><strong><%= @vehicle.name %></strong></p>
        </div>

        <div>
          <small>Year</small>
          <p><strong><%= @vehicle.year %></strong></p>
        </div>

        <div>
          <small>Base Model</small>
          <p><strong><%= @vehicle.base || 'N/A' %></strong></p>
        </div>

        <div>
          <small>Class</small>
          <p><strong><%= @vehicle.klass %></strong></p>
        </div>
      </div>
    </section>
  </div>

  <div class="grid">
    <!-- Engine Specifications Card -->
    <section>
      <hgroup>
        <h2>Engine Specifications</h2>
      </hgroup>
      <div class="grid">
        <div>
          <small>Displacement</small>
          <p><strong><%= @vehicle.displacement_liters %> L</strong></p>
        </div>

        <div>
          <small>Cylinders</small>
          <p><strong><%= @vehicle.cylinders %></strong></p>
        </div>

        <div>
          <small>Transmission</small>
          <p><strong><%= @vehicle.transmission %></strong></p>
        </div>
      </div>
    </section>
  </div>

  <div class="grid">
    <!-- Features Card -->
    <section>
      <hgroup>
        <h2>Features</h2>
      </hgroup>
      <ul>
        <li>
          <% if @vehicle.turbo_charger %>
            <mark>✓ Turbocharger</mark>
          <% else %>
            ○ No Turbocharger
          <% end %>
        </li>

        <li>
          <% if @vehicle.super_charger %>
            <mark>✓ Supercharger</mark>
          <% else %>
            ○ No Supercharger
          <% end %>
        </li>

        <li>
          <% if @vehicle.guzzler %>
            <del>⚠ Gas Guzzler</del>
          <% else %>
            <ins>✓ Standard Efficiency</ins>
          <% end %>
        </li>
      </ul>
    </section>
  </div>

  <div class="grid">
    <!-- Images Section -->
    <section>
      <hgroup>
        <h2>Images</h2>
        <p>Upload photos of this vehicle</p>
      </hgroup>

      <% if @vehicle.images.attached? %>
        <div class="grid">
          <% @vehicle.images.each do |image| %>
            <figure>
              <%= image_tag image.variant(resize_to_limit: [400, 300]), alt: "#{@vehicle.name} image" %>
              <figcaption>
                <%= button_to "Delete", delete_image_manufacturer_vehicle_path(@vehicle.manufacturer, @vehicle, image_id: image.id), method: :delete, data: { turbo_confirm: "Are you sure you want to delete this image?" }, class: "secondary outline" %>
              </figcaption>
            </figure>
          <% end %>
        </div>
      <% else %>
        <p><em>No images uploaded yet.</em></p>
      <% end %>

      <!-- Image Management Actions -->
      <div class="grid">
        <details>
          <summary role="button" class="secondary">Upload Images</summary>
          <%= form_with url: attach_images_manufacturer_vehicle_path(@vehicle.manufacturer, @vehicle), method: :post, multipart: true do |f| %>
            <%= f.file_field :images, multiple: true, accept: "image/*", required: true %>
            <%= f.submit "Upload", style: "margin-top: 1rem;" %>
          <% end %>
        </details>

        <%= link_to "Search & Download Images", search_images_manufacturer_vehicle_path(@vehicle.manufacturer, @vehicle), role: "button", class: "outline" %>
      </div>
    </section>
  </div>

  <footer>
    <small>
      <strong>Created:</strong> <%= @vehicle.created_at.strftime("%B %d, %Y at %I:%M %p") %>
      &nbsp;|&nbsp;
      <strong>Last Updated:</strong> <%= @vehicle.updated_at.strftime("%B %d, %Y at %I:%M %p") %>
    </small>
  </footer>
</article>
